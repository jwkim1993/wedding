<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=390, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>결혼합니다 💕</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <script src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=wuc82dalfo"></script>
</head>

<body>
    <div class="container">
        <!-- Header Section -->
        <section class="header-section">
            <img src="img/header.svg" alt="Wedding Header" class="header-image">
        </section>
        <!-- Wedding Invitation Section -->
        <section class="wedding-invitation">
            <div class="invitation-content">
                <!-- Couple Names Section -->
                <div class="couple-names">
                    <div class="groom">
                        <h3>신랑</h3>
                        <h2>김재원</h2>
                        <p>김남식 · 이효순의 차남</p>
                    </div>
                    <div class="divider">♥</div>
                    <div class="bride">
                        <h3>신부</h3>
                        <h2>이솔</h2>
                        <p>방남일의 장녀</p>
                    </div>
                </div>

            </div>
        </section>

        <!-- Wedding Info Section -->
        <section class="wedding-info">
            <div class="date-time">
                <h3>예식 안내</h3>
                <div class="date">2025년 10월 26일 일요일</div>
                <div class="time">오후 12시 50분</div>
                <div class="countdown">
                    <div class="countdown-text">재원 ♥ 솔 결혼식까지</div>
                    <div class="countdown-timer">
                        <div class="time-unit">
                            <div class="number" id="days">0</div>
                            <div class="label">일</div>
                        </div>
                        <div class="time-unit">
                            <div class="number" id="hours">0</div>
                            <div class="label">시간</div>
                        </div>
                        <div class="time-unit">
                            <div class="number" id="minutes">0</div>
                            <div class="label">분</div>
                        </div>
                        <div class="time-unit">
                            <div class="number" id="seconds">0</div>
                            <div class="label">초</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Venue Information -->
        <section class="venue">
            <h3>예식장 안내</h3>
            <div class="venue-info">
                <h4>빌라드지디 안양, 1층 갤러리아 홀</h4>
                <p class="address">경기 안양시 동안구 관악대로254</p>
                <div class="contact">
                    <p>문의: 031-382-3838</p>
                </div>
            </div>
            <div id="map" class="map-container"></div>
            <div class="navigation-links">
                <h4>내비게이션</h4>
                <div class="nav-buttons">
                    <a href="nmap://route/car?dname=빌라드지디 안양&dlat=37.4015140&dlng=126.9513167" class="nav-btn naver">
                        <img src="icon/naver_map_icon.png" alt="네이버지도" class="nav-icon">
                        네이버지도
                    </a>
                    <a href="tmap://route?goalname=빌라드지디 안양&goalx=126.9513167&goaly=37.4015140" class="nav-btn tmap">
                        <img src="icon/tmap_icon.jpeg" alt="티맵" class="nav-icon">
                        티맵
                    </a>
                    <a href="https://map.kakao.com/link/to/빌라드지디 안양,126.9513167,37.4015140" class="nav-btn kakao">
                        <img src="icon/kakao_navi_icon.png" alt="카카오내비" class="nav-icon">
                        카카오내비
                    </a>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section class="gallery">
            <h3>Gallery</h3>
            <div class="photo-grid collage-grid">
                <!-- pictures_example.png 의 배치를 모사한 12개의 더미 이미지 -->
                <div class="photo-item p1"><img src="wedding-image.png" alt="gallery-1"></div>
                <div class="photo-item p2"><img src="wedding-image.png" alt="gallery-2"></div>
                <div class="photo-item p3"><img src="wedding-image.png" alt="gallery-3"></div>
                <div class="photo-item p4"><img src="wedding-image.png" alt="gallery-4"></div>
                <div class="photo-item p5"><img src="wedding-image.png" alt="gallery-5"></div>
                <div class="photo-item p6"><img src="wedding-image.png" alt="gallery-6"></div>
                <div class="photo-item p7"><img src="wedding-image.png" alt="gallery-7"></div>
                <div class="photo-item p8"><img src="wedding-image.png" alt="gallery-8"></div>
                <div class="photo-item p9"><img src="wedding-image.png" alt="gallery-9"></div>
                <div class="photo-item p10"><img src="wedding-image.png" alt="gallery-10"></div>
                <div class="photo-item p11"><img src="wedding-image.png" alt="gallery-11"></div>
                <div class="photo-item p12"><img src="wedding-image.png" alt="gallery-12"></div>
            </div>
        </section>

        <!-- Photo Modal -->
        <div id="photo-modal" class="modal-overlay" aria-hidden="true" role="dialog" aria-label="사진 보기">
            <button class="modal-btn modal-close" aria-label="닫기">×</button>
            <button class="modal-btn modal-prev" aria-label="이전 사진">‹</button>
            <img class="modal-image" src="" alt="">
            <button class="modal-btn modal-next" aria-label="다음 사진">›</button>
        </div>

        <!-- Account Section -->
        <section class="account">
            <h3>마음 전하실 곳</h3>
            <div class="account-info">
                <div class="account-section">
                    <div class="account-header" onclick="toggleAccountList('groom')">
                        <h4>신랑측</h4>
                        <span class="toggle-icon rotated" id="groom-icon">▼</span>
                    </div>
                    <div class="account-list collapsed" id="groom-list">
                        <div class="account-item">
                            <div class="account-details">
                                <span class="bank-name">신한은행</span>
                                <span class="account-number">110-123-456789</span>
                                <span class="account-holder">김재원</span>
                            </div>
                            <div class="account-buttons">
                                <button class="copy-btn" onclick="copyAccount('110-123-456789', '김재원')">복사</button>
                            </div>
                        </div>
                        <div class="account-item">
                            <div class="account-details">
                                <span class="bank-name">국민은행</span>
                                <span class="account-number">123-456-789012</span>
                                <span class="account-holder">김남식 (신랑 아버지)</span>
                            </div>
                            <div class="account-buttons">
                                <button class="copy-btn" onclick="copyAccount('123-456-789012', '김남식')">복사</button>
                            </div>
                        </div>
                        <div class="account-item">
                            <div class="account-details">
                                <span class="bank-name">우리은행</span>
                                <span class="account-number">345-678-901234</span>
                                <span class="account-holder">이효순 (신랑 어머니)</span>
                            </div>
                            <div class="account-buttons">
                                <button class="copy-btn" onclick="copyAccount('345-678-901234', '이효순')">복사</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="account-section">
                    <div class="account-header" onclick="toggleAccountList('bride')">
                        <h4>신부측</h4>
                        <span class="toggle-icon rotated" id="bride-icon">▼</span>
                    </div>
                    <div class="account-list collapsed" id="bride-list">
                        <div class="account-item">
                            <div class="account-details">
                                <span class="bank-name">카카오뱅크</span>
                                <span class="account-number">3333-11-2345678</span>
                                <span class="account-holder">이솔</span>
                            </div>
                            <div class="account-buttons">
                                <button class="copy-btn" onclick="copyAccount('3333-11-2345678', '이솔')">복사</button>
                            </div>
                        </div>
                        <div class="account-item">
                            <div class="account-details">
                                <span class="bank-name">하나은행</span>
                                <span class="account-number">567-890-123456</span>
                                <span class="account-holder">방남일 (신부 어머니)</span>
                            </div>
                            <div class="account-buttons">
                                <button class="copy-btn" onclick="copyAccount('567-890-123456', '방남일')">복사</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <div class="footer-container">
                <img src="img/footer.svg" alt="Wedding Footer" class="footer-image">
                <div class="footer-text">
                    <p class="footer-subtitle">둘이서 '우리'가 되기로 했어요.</p>
                    <p class="footer-message">
                        저희가 함께할 앞날을 따뜻한 마음으로 축복해 주시면<br><br>
                        더없는 기쁨으로 간직하겠습니다.
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        function initMap() {
            var map = new naver.maps.Map('map', {
                center: new naver.maps.LatLng(37.4015140, 126.9513167),
                zoom: 16
            });

            var marker = new naver.maps.Marker({
                position: new naver.maps.LatLng(37.4015140, 126.9513167),
                map: map,
                title: '빌라드지디 안양'
            });
        }

        if (typeof naver !== 'undefined') {
            initMap();
        } else {
            window.addEventListener('load', initMap);
        }

        // Countdown Timer
        function updateCountdown() {
            const weddingDate = new Date('2025-10-26T12:50:00');
            const now = new Date();
            const timeDiff = weddingDate - now;

            if (timeDiff > 0) {
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = days;
                document.getElementById('hours').textContent = hours;
                document.getElementById('minutes').textContent = minutes;
                document.getElementById('seconds').textContent = seconds;
            } else {
                document.getElementById('days').textContent = '0';
                document.getElementById('hours').textContent = '0';
                document.getElementById('minutes').textContent = '0';
                document.getElementById('seconds').textContent = '0';
            }
        }

        // Update countdown every second
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Copy account function
        function copyAccount(accountNumber, holderName) {
            const textToCopy = `${accountNumber} ${holderName}`;

            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(textToCopy).then(() => {
                    showCopySuccess();
                }).catch(() => {
                    fallbackCopy(textToCopy);
                });
            } else {
                fallbackCopy(textToCopy);
            }
        }

        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                document.execCommand('copy');
                showCopySuccess();
            } catch (err) {
                console.error('복사 실패:', err);
                alert('복사에 실패했습니다. 수동으로 복사해주세요.');
            }

            document.body.removeChild(textArea);
        }

        function showCopySuccess() {
            // Create toast notification
            const toast = document.createElement('div');
            toast.textContent = '계좌번호가 복사되었습니다!';
            toast.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #333;
                color: white;
                padding: 12px 20px;
                border-radius: 6px;
                font-size: 14px;
                z-index: 1000;
                animation: fadeInOut 2s ease-in-out;
            `;

            document.body.appendChild(toast);

            setTimeout(() => {
                document.body.removeChild(toast);
            }, 2000);
        }

        // Toggle account list function
        function toggleAccountList(type) {
            const list = document.getElementById(type + '-list');
            const icon = document.getElementById(type + '-icon');

            if (list.classList.contains('collapsed')) {
                list.classList.remove('collapsed');
                icon.classList.remove('rotated');
            } else {
                list.classList.add('collapsed');
                icon.classList.add('rotated');
            }
        }


        // Add CSS animation for toast
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInOut {
                0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                20%, 80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            }
            /* 더블탭 확대 방지 */
            body { touch-action: manipulation; }
        `;
        document.head.appendChild(style);

        // Gallery Modal Logic
        (function initGalleryModal() {
            const galleryImages = Array.from(document.querySelectorAll('.gallery .photo-item img'));
            if (galleryImages.length === 0) return;

            const modal = document.getElementById('photo-modal');
            const modalImg = modal.querySelector('.modal-image');
            const closeBtn = modal.querySelector('.modal-close');
            const prevBtn = modal.querySelector('.modal-prev');
            const nextBtn = modal.querySelector('.modal-next');
            let currentIndex = 0;

            function openModal(index) {
                currentIndex = index;
                const { src, alt } = galleryImages[currentIndex];
                modalImg.src = src;
                modalImg.alt = alt || '갤러리 이미지';
                modal.classList.add('open');
                modal.setAttribute('aria-hidden', 'false');
                document.body.style.overflow = 'hidden';
            }

            function closeModal() {
                modal.classList.remove('open');
                modal.setAttribute('aria-hidden', 'true');
                modalImg.src = '';
                document.body.style.overflow = '';
            }

            function showAdjacent(delta) {
                const total = galleryImages.length;
                currentIndex = (currentIndex + delta + total) % total;
                const { src, alt } = galleryImages[currentIndex];
                modalImg.src = src;
                modalImg.alt = alt || '갤러리 이미지';
            }

            galleryImages.forEach((img, index) => {
                img.style.cursor = 'zoom-in';
                img.addEventListener('click', () => openModal(index));
                img.setAttribute('tabindex', '0');
                img.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') openModal(index);
                });
            });

            closeBtn.addEventListener('click', closeModal);
            prevBtn.addEventListener('click', () => showAdjacent(-1));
            nextBtn.addEventListener('click', () => showAdjacent(1));

            // 바깥 영역 클릭 시 닫기
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });

            // 키보드 제어
            document.addEventListener('keydown', (e) => {
                if (!modal.classList.contains('open')) return;
                if (e.key === 'Escape') closeModal();
                if (e.key === 'ArrowLeft') showAdjacent(-1);
                if (e.key === 'ArrowRight') showAdjacent(1);
            });

            // 모바일 핀치/더블탭 줌 방지(캡처 단계, cancelable 보장)
            const cancel = (e) => { if (e.cancelable) e.preventDefault(); };
            document.addEventListener('gesturestart', cancel, { passive: false, capture: true });
            document.addEventListener('gesturechange', cancel, { passive: false, capture: true });
            document.addEventListener('gestureend', cancel, { passive: false, capture: true });
            document.addEventListener('touchmove', (e) => {
                if (e.touches && e.touches.length > 1) cancel(e);
            }, { passive: false, capture: true });
            let lastTouchEnd = 0;
            document.addEventListener('touchend', (e) => {
                const now = Date.now();
                if (now - lastTouchEnd <= 300) {
                    cancel(e);
                }
                lastTouchEnd = now;
            }, { passive: false, capture: true });
        })();
    </script>
</body>

</html>